<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INSSSEP AutoFill PyMedica</title>
    <!-- ...existing code... -->
</head>
<body
    style=" font-family: Arial, sans-serif; padding: 4px; background: #f5f5f5; border-radius: 8px; width: 450px; box-sizing: border-box;">
    <div style="width: 450px; height: 40px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
        <textarea id="datos" name="datos" rows="12" placeholder="Pegue el listado tabulado aquí..." style="width: 400px; height: 50px;"></textarea>
    </div>

    <!-- Buscador -->
    <div style="background: #fff; border: 1px solid #ccc; border-radius: 4px; padding: 10px; margin: 0 auto 1rem; max-width: 400px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 8px;">
            <input type="text" id="buscarTexto" placeholder="Buscar en lista..." style="flex: 1; padding: 6px 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 13px;">
            <button type="button" id="buscarAnterior" style="background:#666;color:white;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;">&#9650;</button>
            <button type="button" id="buscarSiguiente" style="background:#666;color:white;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;">&#9660;</button>
            <span id="contadorBusqueda" style="font-size: 12px; color: #666; min-width: 60px; text-align: center;">0/0</span>
        </div>
        <div style="display: flex; gap: 8px; align-items: center;">
            <input type="text" id="reemplazarTexto" placeholder="Reemplazar con..." style="flex: 1; padding: 6px 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 13px;">
            <button type="button" id="btnReemplazar" style="background:#ff9800;color:white;border:none;padding:6px 12px;border-radius:4px;font-size:12px;font-weight:bold;cursor:pointer;">Reemplazar</button>
            <button type="button" id="btnReemplazarTodos" style="background:#f44336;color:white;border:none;padding:6px 12px;border-radius:4px;font-size:12px;font-weight:bold;cursor:pointer;">Todos</button>
        </div>
    </div>

    <div style="display: flex; justify-content: center; gap: 4px; margin-bottom: 1rem;">
        <button type="button" id="formatearLista" style="background:#009688;color:white;border:none;padding:6px 16px;border-radius:4px;font-weight:bold;">Formatear lista</button>
        <button type="button" id="guardarListado" style="background:#ffa000;color:white;border:none;padding:6px 16px;border-radius:4px;font-weight:bold;">Guardar listado en memoria</button>
        <button type="button" id="limpiarCache" style="background:#d32f2f;color:white;border:none;padding:6px 16px;border-radius:4px;font-weight:bold;">Limpiar caché</button>
    </div>
    <div style="display: flex; align-items: center; justify-content: center; gap: 4px; margin-bottom: 0.5rem;">
        <button type="button" id="anteriorPaciente" style="background:#888;color:white;border:none;padding:6px 16px;border-radius:4px;font-weight:bold;">Anterior</button>
        <span id="pacienteActual" style="font-weight:bold; color:#1976d2;">Paciente 1 de 1</span>
        <button type="button" id="siguientePaciente" style="background:#888;color:white;border:none;padding:6px 16px;border-radius:4px;font-weight:bold;">Siguiente</button>
        <input type="number" id="irPaciente" min="1" value="1" style="width: 60px; text-align: center; border-radius: 4px; border: 1px solid #ccc; font-weight: bold;" title="Ir al paciente">
        <button type="button" id="btnIrPaciente" style="background:#1976d2;color:white;border:none;padding:6px 10px;border-radius:4px;font-weight:bold;">Ir</button>
        <span id="totalPacientes" style="margin-left:10px; color:#555; font-size: 14px;"></span>
    </div>
<form id="datosForm" style="display: flex; flex-direction: column; gap: 10px; max-width: 350px; margin: 0 auto;">
        <button type="button" id="cargarCampos" style="background:#43a047;color:white;border:none;padding:4px 0;border-radius:4px;font-weight:bold;margin-top:4px;">Cargar campos</button>
        <label for="codigo">Código:</label>
        <input type="text" id="codigo" name="codigo" required>
        <label for="dni">DNI:</label>
        <input type="text" id="dni" name="dni" required>
        <label for="nombre">Nombre completo:</label>
        <input type="text" id="nombre" name="nombre" required>
        <label for="afiliado">N° Afiliado:</label>
        <input type="text" id="afiliado" name="afiliado" required>
    <div style="display: flex; gap: 10px; margin-top: 4px;">
        <button type="button" id="editarPaciente" style="flex: 1; background:#ff9800;color:white;border:none;padding:4px 0;border-radius:4px;font-weight:bold;">Editar</button>
        <button type="submit" style="flex: 1; background:#1976d2;color:white;border:none;padding:4px 0;border-radius:4px;font-weight:bold;">Rellenar</button>
    </div>
    </form>
    <script src="popup.js"></script>
</body>
</html>